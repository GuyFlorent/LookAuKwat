@model LookAuKwat.Models.JobModel

@{
    ViewBag.Title = "JobDetail";
}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
      integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
      crossorigin="" />

<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
        integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
        crossorigin=""></script>
<h2>JobDetail</h2>

<h3>Are you sure you want to delete this?</h3>
<section class="row">

    <section class="col-md-8">
        <div class="row">
            <div id="myCarousel" class="carousel slide col-sm-12" data-ride="carousel">

                <!-- Indicators -->
                <ol class="carousel-indicators">
                    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                    @{

                        for (int num = 1; num < Model.Images.Count; num++)
                        {
                            <li data-target="#myCarousel" data-slide-to="@num"></li>

                        }

                    }
                </ol>
                <!-- Wrapper for slides -->
                <div class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        @{

                            <div class="item active thumbnail">
                                <a href="@Model.Images[0].Image" data-lightbox="mygallery"><img class="img-rounded" src="@Model.Images[0].Image" alt="" /></a>

                            </div>
                            for (int a = 1; a < Model.Images.Count; a++)
                            {
                                <div class="item thumbnail">
                                    <a href="@Model.Images[a].Image" data-lightbox="mygallery"><img src="@Model.Images[a].Image" alt="" /></a>

                                </div>
                            }
                        }
                        <!-- Left and right controls -->
                        <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                            <span class="glyphicon glyphicon-chevron-left"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="right carousel-control" href="#myCarousel" data-slide="next">
                            <span class="glyphicon glyphicon-chevron-right"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <h3 class="product-title">@Model.Title</h3>
            <div>
                <label>Ajouté le : </label>  @Model.DateAdd

            </div>
            <div class="rating">
                <span class="review-no">41 vues</span>
            </div>
        </div>
        <hr />
        <div class="row">

            <div class=" col-xs-6 col-sm-6 col-md-6">
                @Html.LabelFor(model => model.ActivitySector, htmlAttributes: new { @class = "control-label " })
                <p>@Model.ActivitySector</p>

            </div>
            <div class="col-xs-6 col-sm-6 col-md-6">
                @Html.LabelFor(model => model.TypeContract, htmlAttributes: new { @class = "control-label " })
                <p>@Model.TypeContract</p>

            </div>
            <div class="col-xs-6 col-sm-6 col-md-6 price">
                @Html.LabelFor(model => model.Price, htmlAttributes: new { @class = "control-label " })
                <p><span>@Model.Price FCFA</span></p>

            </div>
            <div class="col-xs-6 col-sm-6 col-md-6">
                @Html.LabelFor(model => model.TypeContract, htmlAttributes: new { @class = "control-label " })
                <p>@Model.TypeContract</p>

            </div>


        </div>
        <hr />
        <div class="row">
            <h3 class="product-title">Description</h3>
            <p class="product-description">@Model.Description</p>
        </div>
        <hr />
        <div class="row">
            <label>Ville : </label> @Model.Town , <label>Adresse : </label> @Model.Street
            <div id="mapidDetailsJob" style="height:250px;"></div>
        </div>

    </section>
    <section class="col-md-4">
    </section>
</section>


<script type="text/javascript">
    var model = @Html.Raw(Json.Encode(Model.Coordinate));
    var mymap = L.map('mapidDetailsJob');
    console.log(model.Lat)
    console.log(model.Lon)
    mymap.setView([model.Lat, model.Lon], 13);

    L.marker([model.Lat, model.Lon])
       // .bindPopup(popup)
                .addTo(mymap)

    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
        maxZoom: 18,
        id: 'mapbox/streets-v11', /*mapbox/satellite-v9*/
        tileSize: 512,
        zoomOffset: -1,
        accessToken: 'pk.eyJ1IjoiZ3V5d2FuZ3VldSIsImEiOiJjazc0amN4ZzkwOG14M2twYXhpbDZ6NjRwIn0.HU_TD-k9bLv6_ctUhyIRuw'
    }).addTo(mymap);

    var options = {
        enableHighAccuracy: false,
        timeout: 5000,
        maximumAge: Infinity
    };

</script>